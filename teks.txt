#!/bin/bash
set -e
//ss
#Untuk menampilkan log
log() {
  echo "[$(date '+%Y-%m-%d %H:%M:%S')] $*"
}

#1. Install lshw on debian
log "Updating package lists..."
sudo apt-get update

log "Installing lshw..."
sudo apt-get install -y lshw

#2. Install ollama service
log "Installing ollama service..."
curl -fsSL https://ollama.com/install.sh | sh

#3. Install uvx
log "Installing uvx..."
curl -LsSf https://astral.sh/uv/install.sh | sh

#Source env for uvx
if [ -f "$HOME/.local/bin/env" ]; then
  log "Source uvx env..."
  source "$HOME/.local/bin/env"
else
  log "Uvx env not found at \$HOME/.local/bin/env"
fi

#4. Install bore-cli
BORE_URL="https://github.com/ekzhang/bore/releases/download/v0.5.2/bore-v0.5.2-x86_64-unknown-linux-musl.tar.gz"
BORE_ARCHIVE="bore.tar.gz"

log "Downloading bore-cli from ${BORE_URL}..."
curl -LsSf -o "${BORE_ARCHIVE}" "${BORE_URL}"

log "Extracting bore-cli..."
tar -xzvf "${BORE_ARCHIVE}"

log "Cleaning up..."
rm -f "${BORE_ARCHIVE}"

log "Installation complete!"
